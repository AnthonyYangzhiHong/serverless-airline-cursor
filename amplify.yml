version: 1
backend:
  phases:
    preBuild:
      commands:
        - npm install -g @aws-amplify/cli
    build:
      commands:
        - '# Execute Amplify CLI with the helper script'
        - amplifyPush --simple
frontend:
  phases:
    preBuild:
      commands:
        - cd src/items-frontend
        - npm install
        - amplify pull --appId ${AMPLIFY_APP_ID} --envName ${AMPLIFY_ENV_NAME} --yes
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: src/items-frontend/build
    files:
      - '**/*'
  cache:
    paths:
      - src/items-frontend/node_modules/**/* 